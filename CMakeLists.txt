CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

SET(VERSION_LOW 0)
SET(VERSION_UP 1)

PROJECT(PROJNAME C)

## helpers -----------
FUNCTION( prepend_str SOURCE_FILES PRESTR )
  FOREACH( SOURCE_FILE ${${SOURCE_FILES}} )
    SET( MODIFIED ${MODIFIED} ${PRESTR}${SOURCE_FILE} )
  ENDFOREACH()
  SET( ${SOURCE_FILES} ${MODIFIED} PARENT_SCOPE )
ENDFUNCTION()

FUNCTION( append_str SOURCE_FILES APPSTR )
  FOREACH( SOURCE_FILE ${${SOURCE_FILES}} )
    SET( MODIFIED ${MODIFIED} ${SOURCE_FILE}${APPSTR} )
  ENDFOREACH()
  SET( ${SOURCE_FILES} ${MODIFIED} PARENT_SCOPE )
ENDFUNCTION()
## --------------------------

SET(CMAKE_MODULE_PATH "${PROJECT_SOURCE_DIR}/cmk/" ${CMAKE_MODULE_PATH})

SET(GENERAL_FLAGS "-std=c99 -Wall -Wextra -pg")
SET(DEBUG_FLAGS "-g")
SET(RELEASE_FLAGS "-O3 -s")

IF(UNIX)
	SET(CMAKE_C_FLAGS "${GENERAL_FLAGS}")
	SET(CMAKE_C_FLAGS_DEBUG "${GENERAL_FLAGS} ${DEBUG_FLAGS}")
	SET(CMAKE_C_FLAGS_RELEASE "${GENERAL_FLAGS} ${RELEASE_FLAGS}")
ENDIF()

## extlib include directories
#INCLUDE_DIRECTORIES(${PROJECT_SOURCE_DIR}/ext/anextlib/include)
## --------------------------

INCLUDE_DIRECTORIES(${PROJECT_SOURCE_DIR}/include)

ADD_SUBDIRECTORY(ext)
ADD_SUBDIRECTORY(src)
ADD_SUBDIRECTORY(demos)
